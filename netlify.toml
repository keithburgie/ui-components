# Netlify configuration for monorepo deployment
# This repo deploys TWO separate Netlify sites:
#   1. Design System Storybook (libraries/design-system)
#   2. Consumer App (apps/consumer-app)

[build]
  # Build command is set per-site in Netlify UI
  # - Storybook: npm ci && npx turbo build-storybook --filter=@ui/design-system
  # - Consumer:  npm ci && npx turbo build --filter=@ui/consumer-app
  
[build.environment]
  # Pin Node version for consistent builds
  NODE_VERSION = "20"
  # Ensure npm installs optional deps (needed for native binaries)
  NPM_FLAGS = "--include=optional"
  # Skip Turbo telemetry prompts in CI
  TURBO_TELEMETRY_DISABLED = "1"
